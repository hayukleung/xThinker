---
title: segmentation-fault
date: 2012-09-21 22:13:38
tags: [c, error, linux]
---

[原文链接](http://www.cnblogs.com/liangxiaxu/archive/2012/09/21/2696396.html)

今天我在运行一个代码时出现了段错误。

- （1）用gdb查看core文件信息

*******************************************************************************************
```
[liangxx@localhost bin]$ gdb ./test-client core.2693 
GNU gdb (GDB) Red Hat Enterprise Linux (7.0.1-23.el5)
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law. Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/liangxx/learning/src/study_boost/study_property_tree/config/bin/test-client...done.
Core was generated by `./test-client'.
Program terminated with signal 11, Segmentation fault.
#0 0x0000000000000001 in ?? ()
(gdb) bt
#0 0x0000000000000001 in ?? ()
#1 0x00007fffe067f6df in ?? ()
#2 0x0000000000000000 in ?? ()
(gdb) q
```
*******************************************************************************************

- （2）使用gdb设置断点进行单步调试

未进入main函数就出现段错误！

- （3）检查Makefile内容

*******************************************************************************************
```
OBJC=test-client.cpp
TARC=test-client

CXX=g++
CXXFLAGS=-shared -fPIC -Wall -g -I../hrd/ -L../lib/ -lprotocol

all:$(TARC)
$(TARC):$(OBJC)
$(CXX) $(OBJC) $(CXXFLAGS) -lclient -o $(TARC)

install:
cp $(TARC) ../bin/

clean:
rm -f $(TARC)
```
*******************************************************************************************

- （4）结论

原来是编译参数搞错，将生成共享库的编译参数错误地用于生成可执行文件！